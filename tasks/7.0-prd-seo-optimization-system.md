# PRD: Epic 7.0 - SEO 최적화 시스템 강화

**Epic ID**: 7.0
**Priority**: High
**Status**: Planning
**Created**: 2025-10-28
**Target Release**: 2025-11-04

---

## Executive Summary

Epic 6.0에서 Guidelines v1.2를 적용한 결과, 콘텐츠 품질은 99/100점을 달성했으나 SEO 점수는 평균 66.33점으로 목표(80+)에 미달했습니다. 특히 긴 포스트(1000+ 줄)의 경우 키워드 밀도가 낮게 측정되는 문제가 발견되었습니다.

Epic 7.0은 현재 시스템의 정리와 함께 SEO 최적화 기능을 강화하여, 포스트 발행 전 SEO 검증과 개선 제안을 자동화하는 것을 목표로 합니다.

---

## Goals & Success Metrics

### Primary Goals
1. 현재 작업 상태 정리 및 문서화
2. SEO 분석 알고리즘 개선 (포스트 길이 고려)
3. Guidelines v1.3 개발 (긴 포스트 대응)
4. 개발자 도구 추가 (SEO 분석 CLI)

### Success Metrics
- ✅ Git 커밋/푸시 완료
- ✅ WordPress 포스트 중복 정리
- ✅ SEO 분석 정확도 20% 향상
- ✅ 긴 포스트(1000+줄) SEO 점수 평균 75+ 달성
- ✅ Guidelines v1.3 적용 시 첫 시도 SEO 80+ 달성

---

## Background & Context

### Current State (Epic 6.0 완료 후)

**달성 성과**:
- Guidelines v1.2 완성 (SEO 규칙 강화)
- 콘텐츠 품질 99/100점 (코드, 링크, 통계 검증)
- 포스트 #4-#6 발행 완료

**문제점**:
1. **Git 상태 미정리**: Guidelines v1.2 및 포스트 개선 사항 미커밋
2. **WordPress 중복 발행**: 포스트 #4-#6 각각 2번씩 발행됨 (ID: 16-21)
3. **SEO 점수 미달**: 평균 66.33/100 (목표: 80+)
4. **긴 포스트 문제**: 1000+ 줄 포스트의 키워드 밀도가 낮게 측정됨
5. **검증 도구 부재**: 발행 전 SEO 검증 불가

### Why This Matters

**비즈니스 임팩트**:
- SEO 점수 부족 → 검색 엔진 순위 하락 → 트래픽 감소 → 수익 감소
- 체계적인 버전 관리 부재 → 협업 어려움 → 생산성 저하
- 수동 SEO 검증 → 시간 낭비 → 발행 속도 저하

**Technical Debt**:
- SEO 알고리즘이 포스트 길이를 고려하지 않음
- Guidelines가 긴 포스트 대응 전략 부재
- 개발자 도구 부족으로 디버깅 어려움

---

## Requirements

### 1. Functional Requirements

#### FR1: Git 상태 정리 및 커밋
- **Priority**: P0 (Critical)
- **Description**: 현재 작업 상태를 Git에 커밋하고 푸시
- **Acceptance Criteria**:
  - [ ] Guidelines v1.2 커밋
  - [ ] 포스트 #4-#6 SEO 개선 커밋
  - [ ] 원격 저장소에 푸시 완료
  - [ ] 커밋 메시지가 명확하고 의미 있음

#### FR2: WordPress 포스트 정리
- **Priority**: P0 (Critical)
- **Description**: 중복 발행된 포스트 정리 및 문서화
- **Acceptance Criteria**:
  - [ ] 포스트 ID 16-21 현황 파악
  - [ ] 중복 포스트 삭제 또는 최신 버전으로 통일
  - [ ] tasks/wordpress-posts.md에 현황 문서화
  - [ ] 각 포스트의 최종 ID와 SEO 점수 기록

#### FR3: Guidelines v1.3 개발
- **Priority**: P1 (High)
- **Description**: 긴 포스트 대응 전략 추가
- **Acceptance Criteria**:
  - [ ] 포스트 길이별 키워드 밀도 공식 정의
  - [ ] 긴 포스트(1000+줄) 키워드 배치 전략
  - [ ] 섹션별 키워드 분포 가이드
  - [ ] SEO 점수 목표 설정 기준 (길이별)
  - [ ] 테스트 포스트로 검증 (1500줄 이상)

#### FR4: SEO 분석 알고리즘 개선
- **Priority**: P1 (High)
- **Description**: 포스트 길이를 고려한 SEO 점수 계산
- **Acceptance Criteria**:
  - [ ] packages/core/src/seo.ts 수정
  - [ ] 키워드 밀도 계산에 포스트 길이 가중치 적용
  - [ ] 섹션별 키워드 분포 분석 추가
  - [ ] 긴 포스트(1000+줄) 대상 테스트 통과
  - [ ] 기존 포스트 점수 재계산 시 정확도 향상 확인

#### FR5: SEO 분석 CLI 명령 추가
- **Priority**: P2 (Medium)
- **Description**: 발행 전 SEO 검증 자동화
- **Acceptance Criteria**:
  - [ ] `blog analyze-seo <file>` 명령 추가
  - [ ] 현재 키워드 밀도 실시간 표시
  - [ ] 목표 밀도 대비 부족/과다 경고
  - [ ] 개선 제안 (어디에 몇 회 추가 필요)
  - [ ] 컬러 출력으로 가독성 향상

### 2. Non-Functional Requirements

#### NFR1: Performance
- Git 작업: 5분 이내 완료
- SEO 분석: 1초 이내 결과 출력
- CLI 명령: 3초 이내 응답

#### NFR2: Maintainability
- 코드 커버리지: 90% 이상
- TypeScript strict 모드 준수
- 명확한 에러 메시지

#### NFR3: Usability
- CLI 명령어 직관적
- 에러 발생 시 복구 방법 제시
- 상세한 도움말 제공

---

## User Stories

### US1: Git 상태 정리
**As a** developer
**I want to** commit and push current changes
**So that** my work is properly version controlled and shareable

**Acceptance Criteria**:
- Guidelines v1.2 변경사항이 커밋됨
- 포스트 SEO 개선 사항이 커밋됨
- 원격 저장소에 푸시 완료
- 커밋 히스토리가 명확함

### US2: WordPress 포스트 관리
**As a** blog administrator
**I want to** clean up duplicate posts
**So that** my WordPress site has only the latest versions

**Acceptance Criteria**:
- 중복 포스트 식별됨
- 최신 버전만 유지됨
- 포스트 현황이 문서화됨

### US3: 긴 포스트 SEO 최적화
**As a** content creator
**I want** guidelines for long posts
**So that** I can achieve good SEO scores even with 1000+ line posts

**Acceptance Criteria**:
- 길이별 키워드 밀도 공식 제공됨
- 섹션별 키워드 배치 전략 제공됨
- 테스트 포스트로 효과 검증됨

### US4: 정확한 SEO 분석
**As a** developer
**I want** SEO analysis that considers post length
**So that** long posts are fairly evaluated

**Acceptance Criteria**:
- 긴 포스트도 정확하게 분석됨
- 섹션별 키워드 분포가 분석됨
- 분석 정확도가 향상됨

### US5: SEO 검증 자동화
**As a** content creator
**I want to** analyze SEO before publishing
**So that** I can fix issues proactively

**Acceptance Criteria**:
- CLI 명령으로 즉시 분석 가능
- 개선 제안이 구체적임
- 시각적으로 이해하기 쉬움

---

## Technical Design

### Architecture Overview

```
blog/
├── tasks/
│   ├── 7.0-prd-seo-optimization-system.md (this file)
│   ├── tasks-7.0-prd-seo-optimization-system.md (generated)
│   └── wordpress-posts.md (new)
├── prompts/
│   └── blog-post-guidelines.md (v1.2 → v1.3)
├── packages/
│   ├── core/
│   │   └── src/
│   │       └── seo.ts (modified)
│   └── cli/
│       └── src/
│           └── commands/
│               └── analyze-seo.ts (new)
└── .git/ (cleaned up)
```

### Data Models

#### SEO Analysis Result
```typescript
interface SEOAnalysis {
  score: number;                    // 0-100
  keywords: KeywordAnalysis[];      // 키워드별 분석
  recommendations: Recommendation[]; // 개선 제안
  postLength: number;               // 포스트 길이 (줄)
  sections: SectionAnalysis[];      // 섹션별 분석
}

interface KeywordAnalysis {
  keyword: string;
  count: number;
  density: number;        // 실제 밀도
  targetDensity: number;  // 목표 밀도 (길이 고려)
  status: 'good' | 'low' | 'high';
}

interface SectionAnalysis {
  section: string;          // H2 제목
  keywordDistribution: Map<string, number>;
  isBalanced: boolean;
}

interface Recommendation {
  type: 'add' | 'remove' | 'redistribute';
  keyword: string;
  location: string;         // 어느 섹션에
  count: number;            // 몇 회
  priority: 'high' | 'medium' | 'low';
}
```

#### WordPress Post Record
```typescript
interface WordPressPostRecord {
  id: number;
  title: string;
  slug: string;
  publishDate: string;
  seoScore: number;
  status: 'active' | 'duplicate' | 'deleted';
  notes: string;
}
```

### Key Algorithms

#### 1. 포스트 길이별 키워드 밀도 공식
```typescript
function calculateTargetDensity(
  baselineDensity: number,  // 0.5-2.5%
  postLength: number        // 줄 수
): number {
  if (postLength < 500) {
    return baselineDensity;
  } else if (postLength < 1000) {
    return baselineDensity * 0.9;
  } else if (postLength < 1500) {
    return baselineDensity * 0.8;
  } else {
    return baselineDensity * 0.7;
  }
}
```

#### 2. 섹션별 키워드 분포 분석
```typescript
function analyzeSectionDistribution(
  content: string,
  keyword: string
): SectionAnalysis[] {
  const sections = content.split(/^## /gm);
  return sections.map(section => {
    const title = section.split('\n')[0];
    const count = (section.match(new RegExp(keyword, 'gi')) || []).length;
    return {
      section: title,
      keywordDistribution: new Map([[keyword, count]]),
      isBalanced: count >= 1 && count <= 5
    };
  });
}
```

---

## Implementation Plan

### Phase 1: 현재 상태 정리 (Task 1, 2)
**Duration**: 30분
**Priority**: P0

1. Git 커밋/푸시
2. WordPress 포스트 정리 및 문서화

### Phase 2: Guidelines 고도화 (Task 4)
**Duration**: 30분
**Priority**: P1

3. Guidelines v1.3 개발
4. 테스트 포스트로 검증

### Phase 3: SEO 엔진 개선 (Task 5)
**Duration**: 1시간
**Priority**: P1

5. SEO 분석 알고리즘 수정
6. 단위 테스트 작성
7. 기존 포스트로 검증

### Phase 4: CLI 도구 확장 (Task 6)
**Duration**: 1.5시간
**Priority**: P2

8. analyze-seo 명령 구현
9. 통합 테스트
10. 문서화

---

## Dependencies

### Internal Dependencies
- Guidelines v1.2 (완료)
- packages/core/src/seo.ts (기존)
- packages/cli/src/index.ts (기존)

### External Dependencies
- None

---

## Risks & Mitigations

### Risk 1: SEO 알고리즘 변경으로 기존 점수 변동
**Impact**: High
**Likelihood**: High
**Mitigation**:
- 기존 포스트 점수를 별도 파일에 백업
- 변경 전후 비교 리포트 생성
- 롤백 가능하도록 버전 관리

### Risk 2: WordPress 포스트 삭제 실수
**Impact**: High
**Likelihood**: Low
**Mitigation**:
- 삭제 전 백업
- 확인 프롬프트 추가
- WordPress REST API로 복구 가능

### Risk 3: Guidelines v1.3 효과 불확실
**Impact**: Medium
**Likelihood**: Medium
**Mitigation**:
- 테스트 포스트로 먼저 검증
- A/B 비교 (v1.2 vs v1.3)
- 피드백 기반 반복 개선

---

## Testing Strategy

### Unit Tests
- SEO 분석 함수 (calculateTargetDensity, analyzeSectionDistribution)
- CLI 명령 (analyze-seo)

### Integration Tests
- 전체 워크플로우 (분석 → 개선 제안 → 재분석)
- Git 작업 (커밋/푸시)

### Manual Tests
- 긴 포스트(1500줄) SEO 분석
- Guidelines v1.3 적용 효과 검증
- CLI 명령 사용성 테스트

---

## Documentation Requirements

- [ ] tasks/7.0-prd-seo-optimization-system.md (this file)
- [ ] tasks/tasks-7.0-prd-seo-optimization-system.md (generated)
- [ ] tasks/wordpress-posts.md (WordPress 포스트 현황)
- [ ] prompts/blog-post-guidelines.md (v1.3)
- [ ] packages/cli/README.md (analyze-seo 명령 설명)
- [ ] CHANGELOG.md (Epic 7.0 변경사항)

---

## Open Questions

1. WordPress 중복 포스트를 삭제할 것인가, 아니면 최신 버전으로 업데이트할 것인가?
   - **Decision**: 최신 버전으로 업데이트 (SEO 개선 버전 유지)

2. SEO 분석 알고리즘을 점진적으로 개선할 것인가, 한 번에 개선할 것인가?
   - **Decision**: 한 번에 개선 (테스트 후 배포)

3. Guidelines v1.3을 바로 적용할 것인가, 아니면 테스트 포스트로 검증 후 적용할 것인가?
   - **Decision**: 테스트 포스트로 검증 후 적용

---

## Approval & Sign-off

**Created by**: Claude Code
**Reviewed by**: User (Pending)
**Approved by**: User (Pending)
**Date**: 2025-10-28

---

## Appendix

### A. Epic 6.0 최종 결과

| 항목 | 결과 |
|------|------|
| Guidelines v1.2 | 완성 |
| 콘텐츠 품질 | 99/100 |
| 포스트 #4 SEO | 78 → 83 |
| 포스트 #5 SEO | 61 → 64 |
| 포스트 #6 SEO | 40 → 52 |
| 평균 SEO | 59.67 → 66.33 |

### B. WordPress 포스트 ID 현황

| 포스트 | 초기 ID | SEO 개선 ID | 상태 |
|--------|---------|-------------|------|
| #4 | 16 | 19 | 중복 |
| #5 | 17 | 20 | 중복 |
| #6 | 18 | 21 | 중복 |

### C. 긴 포스트 SEO 문제 분석

**포스트 #5 (1196줄)**:
- Node.js 밀도: 0.36% (목표: 0.5%)
- 필요한 추가 키워드 수: ~20회

**포스트 #6 (1221줄)**:
- AI 블로그 자동화 밀도: 0.2% (목표: 0.5%)
- 필요한 추가 키워드 수: ~15회

**결론**: 긴 포스트는 목표 밀도를 달성하기 위해 더 많은 키워드 반복이 필요함. Guidelines와 알고리즘 모두 개선 필요.
