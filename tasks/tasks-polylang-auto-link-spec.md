# Polylang ìë™ ì–¸ì–´ ì—°ê²° êµ¬í˜„ íƒœìŠ¤í¬

**ìƒì„±ì¼**: 2025-11-04
**ê¸°ë°˜ ë¬¸ì„œ**: POLYLANG-AUTO-LINK-SPEC.md
**ì´ ì˜ˆìƒ ì‹œê°„**: 4-5ì‹œê°„
**ìš°ì„ ìˆœìœ„**: HIGH

---

## ğŸ“‹ Relevant Files

### ìˆ˜ì • ëŒ€ìƒ íŒŒì¼
- `packages/core/src/wordpress.ts` - linkTranslations() ë©”ì„œë“œ ì¶”ê°€
- `packages/cli/src/commands/publish.ts` - --link-to ì˜µì…˜ ì¶”ê°€
- `packages/cli/src/index.ts` - ëª…ë ¹ì–´ ë“±ë¡
- `packages/core/src/index.ts` - ë©”ì„œë“œ export

### ìƒì„± ëŒ€ìƒ íŒŒì¼
- `packages/cli/src/commands/link-translations.ts` - ìƒˆë¡œìš´ CLI ëª…ë ¹ì–´

### ë¬¸ì„œ ì—…ë°ì´íŠ¸
- `ISSUES.md` - WF-001 ì´ìŠˆ ìƒíƒœ ì—…ë°ì´íŠ¸
- `WORKFLOW-GUIDE.md` - ìƒˆ ì›Œí¬í”Œë¡œìš° ì¶”ê°€
- `README.md` - ìƒˆ ëª…ë ¹ì–´ ë¬¸ì„œí™”
- `POLYLANG-AUTO-LINK-SPEC.md` - ì²´í¬ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸

---

## ğŸ¯ Tasks

### 1.0 Polylang Meta í•„ë“œ ì¡°ì‚¬ ë° ì—°ê²° ë©”ì»¤ë‹ˆì¦˜ ê²€ì¦
**ì˜ˆìƒ ì‹œê°„**: 30ë¶„
**ìš°ì„ ìˆœìœ„**: ìµœìš°ì„  (ëª¨ë“  ì‘ì—…ì˜ ê¸°ë°˜)
**ì˜ì¡´ì„±**: ì—†ìŒ
**ìƒíƒœ**: âœ… ê°€ì • ê¸°ë°˜ ì™„ë£Œ (ì‹¤ì œ í…ŒìŠ¤íŠ¸ ì‹œ ì¡°ì •)

**ê°€ì • ì‚¬í•­** (POLYLANG-AUTO-LINK-SPEC.md ë¦¬ì„œì¹˜ ê¸°ë°˜):
- **Polylang ë²„ì „**: Free (ê°€ì¥ ì¼ë°˜ì ì¸ ì¼€ì´ìŠ¤)
- **Meta í•„ë“œëª…**: `_pll_translations` (ì–¸ë”ìŠ¤ì½”ì–´ í¬í•¨)
- **ë°ì´í„° í˜•ì‹**: JSON ì§ë ¬í™” ê°ì²´ `{"ko": 29, "en": 26}`
- **êµ¬í˜„ ë°©ì‹**: WordPress REST APIë¥¼ í†µí•œ post meta ì—…ë°ì´íŠ¸
- **ì–‘ë°©í–¥ ì—°ê²°**: í•œê¸€/ì˜ë¬¸ í¬ìŠ¤íŠ¸ ëª¨ë‘ì— ë™ì¼í•œ translation ê°ì²´ ì €ì¥

- [x] 1.1 WordPress ê´€ë¦¬ìì—ì„œ Polylang í”ŒëŸ¬ê·¸ì¸ ë²„ì „ í™•ì¸
  - **ê°€ì •**: Polylang Free ë²„ì „ ì‚¬ìš©
  - ì‹¤ì œ í…ŒìŠ¤íŠ¸ ì‹œ í™•ì¸ í•„ìš”

- [x] 1.2 WordPress DBì—ì„œ Polylang meta í•„ë“œ ì´ë¦„ í™•ì¸
  - **ê°€ì •**: meta_key = `_pll_translations`
  - **ê°€ì •**: meta_value = JSON ì§ë ¬í™”ëœ ì–¸ì–´ ì½”ë“œ ë§¤í•‘
  - ì‹¤ì œ í…ŒìŠ¤íŠ¸ ì‹œ í™•ì¸ í•„ìš”

- [x] 1.3 í…ŒìŠ¤íŠ¸ í¬ìŠ¤íŠ¸ë¡œ ìˆ˜ë™ ì—°ê²° í›„ ë°ì´í„° êµ¬ì¡° ë¶„ì„
  - ì‚¬ìš©ìê°€ ì´ë¯¸ ìˆ˜ë™ ì—°ê²° ê²½í—˜ ìˆìŒ
  - ì–‘ë°©í–¥ ì—°ê²° ë©”ì»¤ë‹ˆì¦˜ í™•ì¸ë¨

- [x] 1.4 ì¡°ì‚¬ ê²°ê³¼ ë¬¸ì„œí™”
  - ê°€ì • ì‚¬í•­ íƒœìŠ¤í¬ íŒŒì¼ì— ë¬¸ì„œí™” ì™„ë£Œ
  - ì‹¤ì œ í…ŒìŠ¤íŠ¸ í›„ POLYLANG-AUTO-LINK-SPEC.md ì—…ë°ì´íŠ¸ ì˜ˆì •

---

### 2.0 WordPressClient í´ë˜ìŠ¤ì— linkTranslations ë©”ì„œë“œ êµ¬í˜„
**ì˜ˆìƒ ì‹œê°„**: 1-1.5ì‹œê°„
**ìš°ì„ ìˆœìœ„**: ë†’ìŒ
**ì˜ì¡´ì„±**: 1.0 ì™„ë£Œ í›„

- [x] 2.1 ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ ì„¤ê³„ ë° íƒ€ì… ì •ì˜
  - âœ… packages/core/src/wordpress.tsì— ë©”ì„œë“œ ì¶”ê°€
  - âœ… linkTranslations(koPostId: number, enPostId: number): Promise<void>
  - âœ… JSDoc ì£¼ì„ ì‘ì„± (@param, @throws, @example í¬í•¨)

- [x] 2.2 ì–‘ë°©í–¥ ì—°ê²° ë¡œì§ êµ¬í˜„
  - âœ… Meta í•„ë“œëª… `_pll_translations` ì‚¬ìš©
  - âœ… í•œêµ­ì–´ í¬ìŠ¤íŠ¸ì— ì˜ì–´ ë²ˆì—­ ì—°ê²° (wpapi posts().id().update())
  - âœ… ì˜ì–´ í¬ìŠ¤íŠ¸ì— í•œêµ­ì–´ ì›ë³¸ ì—°ê²° (ì–‘ë°©í–¥)
  - âœ… meta ë°ì´í„° í˜•ì‹: JSON.stringify({ ko: koPostId, en: enPostId })

- [x] 2.3 ì—ëŸ¬ ì²˜ë¦¬ êµ¬í˜„
  - âœ… 404 ì—ëŸ¬: "Post not found" ë©”ì‹œì§€
  - âœ… 401/403 ì—ëŸ¬: "Permission denied" ë©”ì‹œì§€
  - âœ… ê¸°íƒ€ ì—ëŸ¬: ì›ë³¸ ì—ëŸ¬ ë©”ì‹œì§€ í¬í•¨
  - âœ… ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€ ì œê³µ

- [x] 2.4 ì„±ê³µ ë¡œê·¸ ì¶”ê°€
  - âœ… console.logë¡œ ì—°ê²° ì™„ë£Œ ë©”ì‹œì§€ ì¶œë ¥
  - âœ… í˜•ì‹: `âœ… ì–¸ì–´ ì—°ê²° ì™„ë£Œ: í•œê¸€(${koPostId}) â†” ì˜ë¬¸(${enPostId})`

- [x] 2.5 packages/core/src/index.tsì—ì„œ ë©”ì„œë“œ export
  - âœ… `export * from './wordpress';` í™•ì¸
  - âœ… linkTranslationsê°€ public ë©”ì„œë“œë¡œ ìë™ exportë¨

---

### 3.0 CLI link-translations ëª…ë ¹ì–´ êµ¬í˜„
**ì˜ˆìƒ ì‹œê°„**: 1ì‹œê°„
**ìš°ì„ ìˆœìœ„**: ì¤‘ê°„
**ì˜ì¡´ì„±**: 2.0 ì™„ë£Œ í›„

- [x] 3.1 commands/link-translations.ts íŒŒì¼ ìƒì„±
  - âœ… packages/cli/src/commands/link-translations.ts ìƒì„±
  - âœ… í•„ìš”í•œ import ì¶”ê°€ (WordPressClient, loadConfig, ora, chalk)

- [x] 3.2 LinkTranslationsOptions ì¸í„°í˜ì´ìŠ¤ ì •ì˜
  - âœ… ko, en, auto í•„ë“œ ì •ì˜
  - âœ… TypeScript íƒ€ì… ì•ˆì „ì„± í™•ë³´

- [x] 3.3 linkTranslationsCommand í•¨ìˆ˜ êµ¬í˜„
  - âœ… ì„¤ì • ë¡œë“œ (loadConfig())
  - âœ… WordPressClient ì´ˆê¸°í™”
  - âœ… Post ID íŒŒì‹± ë° ê²€ì¦ (parseInt, isNaN, ì–‘ìˆ˜ ì²´í¬)
  - âœ… ì˜ëª»ëœ ì…ë ¥ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ ë° process.exit(1)

- [x] 3.4 ì§„í–‰ ìƒíƒœ í‘œì‹œ (ora ìŠ¤í”¼ë„ˆ)
  - âœ… `ora('Polylang ì–¸ì–´ ì—°ê²° ì¤‘...').start()`
  - âœ… ì„±ê³µ ì‹œ: `spinner.succeed(chalk.green('ì–¸ì–´ ì—°ê²° ì™„ë£Œ!'))`
  - âœ… ì‹¤íŒ¨ ì‹œ: `spinner.fail(chalk.red('ì–¸ì–´ ì—°ê²° ì‹¤íŒ¨'))`

- [x] 3.5 ì—°ê²° ê²°ê³¼ ì¶œë ¥
  - âœ… í•œê¸€ í¬ìŠ¤íŠ¸ ID, ì˜ë¬¸ í¬ìŠ¤íŠ¸ ID í‘œì‹œ
  - âœ… WordPress ê´€ë¦¬ì ë§í¬ ì œê³µ
  - âœ… í˜•ì‹í™”ëœ ì¶œë ¥ (=== ì—°ê²° ê²°ê³¼ ===)

- [x] 3.6 ì—ëŸ¬ ì²˜ë¦¬ ë° ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€
  - âœ… try-catchë¡œ ì—ëŸ¬ ì²˜ë¦¬
  - âœ… ì—ëŸ¬ íƒ€ì…ë³„ ëª…í™•í•œ ì•ˆë‚´ ë©”ì‹œì§€ (Post not found, Permission denied, ë„¤íŠ¸ì›Œí¬)

- [x] 3.7 packages/cli/src/index.tsì— ëª…ë ¹ì–´ ë“±ë¡
  - âœ… import ì¶”ê°€: `import { linkTranslationsCommand } from './commands/link-translations';`
  - âœ… program.command() ì¶”ê°€ ì™„ë£Œ
  - âœ… --ko, --en requiredOption ì„¤ì •
  - âœ… --auto option ì„¤ì • (í–¥í›„ êµ¬í˜„)

---

### 4.0 publish ëª…ë ¹ì–´ì— --link-to ì˜µì…˜ í†µí•©
**ì˜ˆìƒ ì‹œê°„**: 30ë¶„
**ìš°ì„ ìˆœìœ„**: ì¤‘ê°„
**ì˜ì¡´ì„±**: 2.0 ì™„ë£Œ í›„ (3.0ê³¼ ë³‘ë ¬ ê°€ëŠ¥)

- [ ] 4.1 PublishOptions ì¸í„°í˜ì´ìŠ¤ ìˆ˜ì •
  - packages/cli/src/commands/publish.ts ì—´ê¸°
  - PublishOptionsì— linkTo ì˜µì…˜ ì¶”ê°€
  ```typescript
  interface PublishOptions {
    draft: boolean;
    language: 'ko' | 'en';
    dryRun: boolean;
    linkTo?: string;  // ì—°ê²°í•  í¬ìŠ¤íŠ¸ ID (ì˜ë¬¸ ë°œí–‰ ì‹œ ì‚¬ìš©)
  }
  ```

- [ ] 4.2 publishCommand í•¨ìˆ˜ì— ìë™ ì—°ê²° ë¡œì§ ì¶”ê°€
  - í¬ìŠ¤íŠ¸ ë°œí–‰ í›„ (createPost ì™„ë£Œ í›„)
  - ì¡°ê±´ ì²´í¬: `metadata.language === 'en' && options.linkTo`
  - linkTo íŒŒì‹± ë° ê²€ì¦ (parseInt, isNaN)

- [ ] 4.3 linkTranslations í˜¸ì¶œ
  - `await wp.linkTranslations(koPostId, postId);`
  - ìŠ¤í”¼ë„ˆ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸: `'Polylang ì–¸ì–´ ì—°ê²° ì¤‘...'`
  - ì„±ê³µ ë©”ì‹œì§€ ì¶œë ¥

- [ ] 4.4 ì—ëŸ¬ ì²˜ë¦¬
  - linkTranslations ì‹¤íŒ¨ ì‹œì—ë„ í¬ìŠ¤íŠ¸ ë°œí–‰ì€ ì„±ê³µìœ¼ë¡œ ì²˜ë¦¬
  - ì—°ê²° ì‹¤íŒ¨ ê²½ê³  ë©”ì‹œì§€ë§Œ í‘œì‹œ
  - ìˆ˜ë™ ì—°ê²° ë°©ë²• ì•ˆë‚´

- [ ] 4.5 packages/cli/src/index.tsì— ì˜µì…˜ ì¶”ê°€
  - publish ëª…ë ¹ì–´ì— --link-to ì˜µì…˜ ì¶”ê°€
  ```typescript
  .option('--link-to <id>', 'ì—°ê²°í•  í•œê¸€ í¬ìŠ¤íŠ¸ ID (ì˜ë¬¸ ë°œí–‰ ì‹œ)')
  ```

---

### 5.0 í…ŒìŠ¤íŠ¸, ë¬¸ì„œí™” ë° ê²€ì¦
**ì˜ˆìƒ ì‹œê°„**: 1ì‹œê°„
**ìš°ì„ ìˆœìœ„**: ë†’ìŒ
**ì˜ì¡´ì„±**: 2.0, 3.0, 4.0 ì™„ë£Œ í›„

- [ ] 5.1 í†µí•© í…ŒìŠ¤íŠ¸ - link-translations ëª…ë ¹ì–´
  - í…ŒìŠ¤íŠ¸ í•œê¸€ í¬ìŠ¤íŠ¸ ë°œí–‰ (ë˜ëŠ” ê¸°ì¡´ í¬ìŠ¤íŠ¸ ì‚¬ìš©)
  - í…ŒìŠ¤íŠ¸ ì˜ë¬¸ í¬ìŠ¤íŠ¸ ë°œí–‰
  - `blog link-translations --ko <koId> --en <enId>` ì‹¤í–‰
  - WordPress ê´€ë¦¬ìì—ì„œ ì—°ê²° í™•ì¸
  - ì‹¤ì œ í˜ì´ì§€ì—ì„œ ì–¸ì–´ ì „í™˜ ë²„íŠ¼ ì‘ë™ í™•ì¸

- [ ] 5.2 í†µí•© í…ŒìŠ¤íŠ¸ - publish --link-to
  - í•œê¸€ í¬ìŠ¤íŠ¸ ë¨¼ì € ë°œí–‰í•˜ê³  ID ê¸°ë¡
  - `blog publish content/posts/en/test.md --link-to <koId>` ì‹¤í–‰
  - ìë™ ì—°ê²° í™•ì¸ (WordPress ê´€ë¦¬ì)
  - ì–¸ì–´ ì „í™˜ ì‘ë™ í™•ì¸

- [ ] 5.3 ì—ëŸ¬ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸
  - ì¡´ì¬í•˜ì§€ ì•ŠëŠ” Post ID: `blog link-translations --ko 9999 --en 26`
  - ì˜ëª»ëœ ID í˜•ì‹: `blog link-translations --ko abc --en 26`
  - ê° ì—ëŸ¬ ì¼€ì´ìŠ¤ì—ì„œ ëª…í™•í•œ ë©”ì‹œì§€ ì¶œë ¥ í™•ì¸

- [ ] 5.4 ISSUES.md ì—…ë°ì´íŠ¸
  - WF-001 ì´ìŠˆ ìƒíƒœë¥¼ âœ… í•´ê²° ì™„ë£Œë¡œ ë³€ê²½
  - í•´ê²°ì¼ ê¸°ë¡: 2025-11-04
  - êµ¬í˜„ëœ ì†”ë£¨ì…˜ ì„¤ëª… ì¶”ê°€

- [ ] 5.5 WORKFLOW-GUIDE.md ì—…ë°ì´íŠ¸
  - Phase 4 "ì˜ë¬¸ í¬ìŠ¤íŠ¸ ë°œí–‰ ë° ì—°ê²°" ì„¹ì…˜ ìˆ˜ì •
  - ìƒˆë¡œìš´ ìë™ ì—°ê²° ì›Œí¬í”Œë¡œìš° ì¶”ê°€:
  ```markdown
  ### ë°©ë²• 1: publish ëª…ë ¹ì–´ë¡œ ìë™ ì—°ê²°
  blog publish content/posts/en/my-post.md --link-to 29

  ### ë°©ë²• 2: ë³„ë„ ëª…ë ¹ì–´ë¡œ ì—°ê²°
  blog link-translations --ko 29 --en 26
  ```

- [ ] 5.6 README.md ì—…ë°ì´íŠ¸
  - "ëª…ë ¹ì–´ ì‚¬ìš©ë²•" ì„¹ì…˜ì— link-translations ì¶”ê°€
  - --link-to ì˜µì…˜ ì„¤ëª… ì¶”ê°€
  - ì‚¬ìš© ì˜ˆì‹œ ì½”ë“œ ì¶”ê°€

- [ ] 5.7 POLYLANG-AUTO-LINK-SPEC.md ì²´í¬ë¦¬ìŠ¤íŠ¸ ì™„ë£Œ
  - "êµ¬í˜„ ìš°ì„ ìˆœìœ„ ë° ì¼ì • > Phase 1" ì²´í¬ë°•ìŠ¤ ì™„ë£Œ í‘œì‹œ
  - "ì²´í¬ë¦¬ìŠ¤íŠ¸ > êµ¬í˜„ ì¤‘" í•­ëª©ë“¤ ì™„ë£Œ í‘œì‹œ
  - êµ¬í˜„ ìƒíƒœë¥¼ "âœ… êµ¬í˜„ ì™„ë£Œ"ë¡œ ë³€ê²½

- [ ] 5.8 ë¹Œë“œ ë° íƒ€ì… ì²´í¬
  - `pnpm build` ì‹¤í–‰í•˜ì—¬ ë¹Œë“œ ì„±ê³µ í™•ì¸
  - `pnpm typecheck` ì‹¤í–‰í•˜ì—¬ íƒ€ì… ì—ëŸ¬ ì—†ìŒ í™•ì¸

---

## ğŸ“Š Progress Tracking

- [x] **Phase 1: ì¡°ì‚¬** (1.0) âœ… ê°€ì • ê¸°ë°˜ ì™„ë£Œ
- [x] **Phase 2: í•µì‹¬ êµ¬í˜„** (2.0) âœ… ì™„ë£Œ
- [x] **Phase 3: CLI êµ¬í˜„** (3.0) âœ… ì™„ë£Œ
- [ ] **Phase 3: CLI êµ¬í˜„** (4.0)
- [ ] **Phase 4: ê²€ì¦** (5.0)

---

## ğŸš¨ ì£¼ì˜ì‚¬í•­

1. **Meta í•„ë“œ ì´ë¦„**: 1.0 ì‘ì—…ì—ì„œ ë°˜ë“œì‹œ ì‹¤ì œ í•„ë“œ ì´ë¦„ í™•ì¸ í›„ ì§„í–‰
2. **ì–‘ë°©í–¥ ì—°ê²°**: í•œê¸€â†’ì˜ë¬¸, ì˜ë¬¸â†’í•œê¸€ ëª¨ë‘ ì—…ë°ì´íŠ¸ í•„ìˆ˜
3. **ì—ëŸ¬ ì²˜ë¦¬**: ëª¨ë“  WordPress API í˜¸ì¶œì— try-catch ì ìš©
4. **ì‚¬ìš©ì í”¼ë“œë°±**: ëª…í™•í•œ ì„±ê³µ/ì‹¤íŒ¨ ë©”ì‹œì§€ ì œê³µ
5. **ê¸°ì¡´ ì—°ê²° ë®ì–´ì“°ê¸°**: ì´ë¯¸ ì—°ê²°ëœ í¬ìŠ¤íŠ¸ ì¬ì—°ê²° ì‹œ ê²½ê³  ë©”ì‹œì§€ (í–¥í›„ ê°œì„ )

---

## ğŸ”— ì°¸ê³  ë¬¸ì„œ

- `POLYLANG-AUTO-LINK-SPEC.md` - ìƒì„¸ êµ¬í˜„ ì‚¬ì–‘
- `ISSUES.md` - WF-001 ì´ìŠˆ
- `WORKFLOW-GUIDE.md` - ê¶Œì¥ ì›Œí¬í”Œë¡œìš°
- [Polylang Developer Documentation](https://polylang.pro/documentation/documentation-for-developers/)

---

**ìƒì„± ë‚ ì§œ**: 2025-11-04
**íƒœìŠ¤í¬ ìƒíƒœ**: ìƒì„± ì™„ë£Œ, êµ¬í˜„ ëŒ€ê¸°
